# Речници, сортирани речници, ламбда изрази и LINQ  
## Теория 
### Речници и сортирани речници
Dictionary
```
var dict = new Dictionary<string, int>();
foreach (var pair in dict) 
Console.WriteLine("{0} -> {1}", pair.Key, pair.Value);
```
SortedDictionary
```
var sortedDict = new SortedDictionary<string,int>();
Console.WriteLine(String.Join(", ", sortedDict.Keys));
Console.WriteLine(String.Join(", ", sortedDict.Values));
```
Функции
- Count = пази броя на двойките от ключ-стойност
- Keys = съдържа уникалните ключове 
- Values = съдържа всички стойности
- Основни операции: [], Add(), Remove(), Clear()
- ContainsKey() = проверява дали даден ключ съществува в речника (бърза операция)
- ContainsValue() = проверява дали дадена стойност съществува в речника (бавна операция)
- TryGetValue() = проверява дали даден ключ съществува в речника и отпечатва стойността му

### LINQ
```
using System.Linq;
```
Функции
- Min() = намира най-малкия елемент в колекция
```
new List<int>() { 1, 2, 3, 4, -1, -5, 0, 50 }.Min() = -5
```
- Max() = намира най-големия елемент в колекция
```
new int[] { 1, 2, 3, 40, -1, -5, 0, 5 }.Max() = 40
```
- Sum() = намира сумата на всички елементи в колекция
```
new long[] {1, 2, 3, 4, -1, -5, 0, 50}.Sum() = 54
```
- Average() = намира средноаритметичното на всички елементи
```
new int[] {1, 2, 3, 4, -1, -5, 0, 50}.Average() = 6.75
```
- Select() = въвежда колекция на един ред
```
var nums = Console.ReadLine().Split().Select(int.Parse); // къс запис
// var nums = Console.ReadLine().Split().Select(number => int.Parse(number)); // дълъг запис
```
- ToArray() и ToList() = преобразуване на колекции
```
int[] array = Console.ReadLine().Split().Select(int.Parse).ToArray();
List<double> list = Console.ReadLine().Split().Select(double.Parse).ToList();
```
- OrderBy(), OrderByDescending() и ThenBy() = сортиране на колекции
```
List<int> nums = { 1, 5, 2, 4, 3 };
nums = nums.OrderBy(num => num).ToList();
nums = nums.OrderByDescending(num => num).ToList();
Dictionary<int, string> sortedDict = products.OrderBy(pair => pair.Value).ThenBy(pair => pair.Key).ToDictionary(pair => pair.Key, pair => pair.Value);
```
- Take() = взимане на определени елементи
```
var nums = new List<int>() { 10, 20, 30, 40, 50, 60}.Take(3).ToArray(); // nums = [10, 20, 30]
```
- Skip() = пропускане на елементи
```
var nums = new List<int>() { 10, 20, 30, 40, 50, 60}.Skip(3).Take(2).ToArray(); // nums = [40, 30]
```

### Ламбда изрази и функции
Лабда израз е анонимна функция съдържаща изрази и твърдения.
```
var lambda = (a => a > 5);
```
Ламбда функциите са внедрени методи (функции) които вземат входни параметри и връщат стойности: 
- Пример 1
```
x => x / 2
static int Func(int x) { return x / 2; }
```
- Пример 2
```
x => x != 0
static bool Func(int x) { return x != 0; }
```
- Пример 3
```
() => 42
static int Func() { return 42; }
```
- Пример 4
```
(x, y) => x+y
static int Func(int x, int y) { return x+y; }
```
Филтриране на колекции чрез Where() и Count()
```
int[] nums = { 1, 2, 3, 4, 5, 6};
nums = nums.Where(num => num % 2 == 0).ToArray(); // nums = [2, 4, 6]
int count = nums.Count(num => num % 2 == 0); // count = 3
```
Филтриране и сортиране с Ламбда функции
```
int[] nums = { 11, 99, 33, 55, 77, 44, 66, 22, 88 };
nums.OrderBy(x => x).Take(3);    // 11 22 33
nums.Where(x => x < 50);         // 11 33 44 22
nums.Count(x => x % 2 == 1);     // 5
nums.Select(x => x * 2).Take(5); // 22 198 66 110 154
```
Извличане на уникални елементи от колекция
```
int[] nums = { 1, 2, 2, 3, 4, 5, 6, -2, 2, 0, 15, 3, 1, 0, 6 };
nums = nums.Distinct().ToArray(); // nums = [1, 2, 3, 4, 5, 6, -2, 0, 15]
```
Извличане на един елемент от колекция
```
int[] nums = { 1, 2, 3, 4, 5, 6 };
int firstNum = nums.First(x => x % 2 == 0); // 1
int lastNum = nums.Last(x => x % 2 == 1); // 6
int singleNum = nums.Single(x => x == 4); // 4
```
Обръщане и слепяне на колекции
```
int[] nums = { 1, 2, 3, 4, 5, 6};
nums = nums.Reverse(); // nums = 6, 5, 4, 3, 2, 1
int[] otherNums = { 7, 8, 9, 0 };
nums = nums.Concat(otherNums); // nums = 1, 2, 3, 4, 5, 6, 7, 8, 9, 0
```

## Задачи
### 1. Нечетни срещания
Напишете програма, която извлича от поредица от думи всички елементи, които се срещат нечетен брой пъти (без значение от големината на буквите)
- Думите са въведени на един ред разделени с интервал
- Изведете получените думи с малки бувки, по реда им на поява

| Вход                           | Изход         |
| ------------------------------ | ------------- |
| Java C# PHP PHP JAVA C java    | java, c#, c   |
| 3 5 5 hi pi HO Hi 5 ho 3 hi pi | 5, hi         |
| a a A SQL xx a xx a A a XX c   | a, sql, xx, c |

Подсказки
- Използвйате речник (string -> int), за да преброите всички срещания на всяка дума (като в предната задача).
- Обходете всички двойки ключ-стойност в речника и запазете в резултатите всички ключове, които имат нечетна стойност.
- Изведете списъка с резултатите

### 2. Телефонен указател
Напишете програма, която получава информация от конзолата за хора и техните телефонни номера. Всеки запис трябва да има само едно име и телефон (и двете се пазят в низ). 
На всеки ред ще получите някоя от следните команди:
- A {име} {телефон} = добавя записа към телефонния указател. В случай че се добавя име, което вече съществува в указателя трябва да смените съществуващия номер с новия.
- S {име} = търси се човек с такива име и се извежда резултат във формат "{име} -> {номер}". В случай на несъществуващ контакт, изведете "Contact {име} does not exist.".
- END = спира получаването на команди.

| Вход               | Изход                           |
| ------------------ | ------------------------------- |
| A Nakov 0888080808 | Contact Mariika does not exist. |
| S Mariika          | Nakov -> 0888080808             |
| S Nakov            |                                 |
| END	             |                                 |

| Вход                  | Изход                         |
| --------------------- | ----------------------------- |
| A Nakov +359888001122 | Misho -> 02/3123              |
| A RoYaL(Ivan) 666     | Simo -> 02/987665544          |
| A Gero 5559393        | Contact simo does not exist.  |
| A Simo 02/987665544   | Contact RoYaL does not exist. |
| S Simo                | RoYaL(Ivan) -> 666            |
| S simo                |                               |
| S RoYaL               |                               |
| S RoYaL(Ivan)         |                               |
| END	                |                               |

| Вход               | Изход            |
| ------------------ | ---------------- |
| A Misho +359883123 | Misho -> 02/3123 |
| A Misho 02/3123    |                  |
| S Misho            |                  |
| END	             |                  |

Подсказки
- Обработвайте командите като ги разделяте чрез интервал. Изпълнявайте командите докато не стигнете до "END".
- Съхранявайте указателя в Dictionary<string, string> с ключ {име} и стойност {телефонен номер}.

### 3. Миньорска задача
Получавате поредица от низове, всеки на нов ред. Всеки нечетен ред на конзолата показва полезно изкопаемо (злато, сребро, мед и т.н.), а всеки четен - количество. 
Вашата задача е да съберете изкопаемите и да изпечатате всяко на нов ред. 
Изведете изкопаемите и техните количества във формат: {resource} -> {quantity}
Количествата ще бъдат в интервала [1 ... 2 000 000 000]

| Вход   | Изход        |
| ------ | ------------ |
| Gold   | Gold -> 155  |
| 155    | Silver -> 10 |
| Silver | Copper -> 17 |
| 10     |              |
| Copper |              |
| 17     |              |
| stop	 |              |

| Вход   | Изход        |
| ------ | ------------ |
| gold   | gold -> 170  |
| 155    | silver -> 10 |
| silver | copper -> 17 |
| 10     |              |
| copper |              |
| 17     |              |
| gold   |              |
| 15     |              |
| stop	 |              |

### 4. Супермаркет
Напишете програма, която пази информация за продукти и техните цени. Всеки продукт си има име, цена и количество. Ако продъктът не съществува в базата данни, той се добавя със стартово количество.
Ако получите продукт, който вече съществува, то ще увеличите неговото количество и ако цената е различна, ще замените старата с новата цена.
Ще получите име, цена и количество за всеки продукт на нов ред. Накрая ще стои команда "stocked". При нейното срещане, изведете всичките артикули с техните име, цена, наличност и обща цена на вски продукти с това име. Когато изведете всички продукти, изведете и общата цена на всички артикули.
Важно: Общата цена се изчислява на базата на най-новата цена за всеки продукт

Вход
- Докато не получите "stocked", ще получавате продукту във формат: "{име} {цена} {количество}".
- Данните ще бъдат винаги отделени от един интервал

Изход
- Изведете информацията за всеки продукт, следвайки формата: "{име}: ${цена:F2} * {количество} = ${общо:F2}"
- На следващия ред, изведете 30 тиренца.
- На последния ред, изведете общо: "Grand Total: ${grandTotal:F2}"

| Вход             | Изход                          |
| ---------------- | ------------------------------ |
| Beer 2.20 100    | Beer: $2.20 * 100 = $220.00    |
| IceTea 1.50 50   | IceTea: $1.50 * 50 = $75.00    |
| NukaCola 3.30 80 | NukaCola: $3.30 * 80 = $264.00 |
| Water 1.00 500   | Water: $1.00 * 500 = $500.00   |
| stocked	       | ------------------------------ |
|                  | Grand Total: $1059.00          |

| Вход            | Изход                         |
| --------------- | ----------------------------- |
| Beer 2.40 350   | Beer: $1.20 * 550 = $660.00   |
| Water 1.25 200  | Water: $1.25 * 200 = $250.00  |
| IceTea 5.20 100 | IceTea: $0.50 * 220 = $110.00 |
| Beer 1.20 200   | ----------------------------- |
| IceTea 0.50 120 | Grand Total: $1020.00         |
| stocked	      |                               |

| Вход                       | Изход                                    |
| -------------------------- | ---------------------------------------- |
| CesarSalad 10.20 25        | CesarSalad: $10.20 * 25 = $255.00        |
| SuperEnergy 0.80 400       | SuperEnergy: $0.80 * 400 = $320.00       |
| EvenSupererEnergy 1.00 400 | EvenSupererEnergy: $1.00 * 400 = $400.00 |
| Beer 1.35 350              | Beer: $1.35 * 350 = $472.50              |
| beer 0.50 450              | beer: $0.50 * 450 = $225.00              |
| IceCream 1.50 25           | IceCream: $1.50 * 25 = $37.50            |
| stocked	                 | ---------------------------------------- |
|                            | Grand Total: $1710.00                    |

### 5. Брой на реалните числа
Въведете списък от реални числа и ги изведете в нарастващ ред заедно с броя на срещанията им.

| Вход            | Изход    |
| --------------- | -------- |
| 8 2.5 2.5 8 2.5 | 2.5 -> 3 |
|                 | 8 -> 2   |

| Вход        | Изход    |
| ----------- | -------- |
| 1.5 5 1.5 3 | 1.5 -> 2 |
|             | 3 -> 1   |
|             | 5 -> 1   |

| Вход           | Изход     |
| -------------- | --------- |
| -2 0.33 0.33 2 | -2 -> 1   |
|                | 0.33 -> 2 |
|                | 2 -> 1    |

Подсказки
- Използвайте SortedDictionary<double, int> с име counts.
- Обходете всяко число num и увеличете counts[num] (когато num съществува в речника) или присвоете counts[num] = 1 (когато num не съществува в речника).
- Обходете всяко едно от числата num в речника (counts.Keys) и изведете числото num и броя на срещанията му counts[num].

### 6. Подобрен телефонен указател
Добавете функционалност към указателя от предната задача да извежда всички контакти в азбучен ред, когато получи командата "ListAll".

| Вход                  | Изход                  |
| --------------------- | ---------------------- |
| A Nakov +359888001122 | Gero -> 5559393        |
| A RoYaL(Ivan) 666     | Gero -> 5559393        |
| A Gero 5559393        | Nakov -> +359888001122 |
| A Simo 02/987665544   | RoYaL(Ivan) -> 666     |
| ListAll               | Simo -> 02/987665544   |
| END                   |                        |

Подсказки
- Начин I (по-бавен): Сортирайте всички записи в речника по ключ и ги изведете.
- Начин II (по-бърз): Пазете записите в по-подходяща структура, която да ги пази в сортиран ред по начало.

### 7. Сума, минимум, максимум, средноаритметично
Напишете програма, която въвежда n целки числа и извежда тяхната сума, минимум, максимум, първи елемент, последен елемент и средноаритметично.

| Вход | Изход          |
| ---- | -------------- |
| 5    | Sum = 72       |
| 12   | Min = -5       |
| 20   | Max = 37       |
| -5   | Average = 14.4 |
| 37   |                |
| 8	   |                |

| Вход | Изход           |
| ---- | --------------- |
| 4    | Sum = 135       |
| 50   | Min = 20        |
| 20   | Max = 50        |
| 25   | Average = 33.75 |
| 40   |                 |

Подсказки
- Добавете "System.Linq", за да може да ползвате функциите от LINQ.
- Въведете масива от входни числа nums[].
- Използвайте nums.Min(), nums.Max(), и т.н.

### 8. Трите най-големи числа
Въведете списък от реални числа и изведете 3 най-големи от тях. Ако по-малко от 3 числа съществуват, изведете всички от тях.

| Вход             | Изход    |
| ---------------- | -------- |
| 10 30 15 20 50 5 | 50 30 20 |

| Вход  | Изход |
| ----- | ----- |
| 20 30 | 30 20 |

Подсказки: Може да използвате LINQ заявка по следния начин: nums.OrderByDescending(x => x).Take(3).

### 9. Сортиране на кратки думи
Въведете текст, извлечете неговите думи, намерете всички кратки думи (с по-малко от 5 знака) и ги изпечатайте в азбучен ред, с малки букви.
- Използвайте следните разделители: . , : ; ( ) [ ] " ' \ / ! ? (space).
- Големината на буквите няма значение
- Премахнете дублиращите се думи.

| Вход                                                                                                        | Изход                                     |
| ----------------------------------------------------------------------------------------------------------- | ----------------------------------------- |
| In SoftUni you can study Java, C#, PHP and JavaScript. JAVA and c# developers graduate in 2-3 years. Go in! | 2-3, and, c#, can, go, in, java, php, you |

Подсказки:
- За да извлечете думите от входния текст, разделете го чрез зададените разделители.
- Използвайте LINQ изрази:
- Филтирайте по дължина на думата: Where(...)
- Подредете думите: OrderBy(...)
- Използвайте Distinct(), за да премахнете дублиранията

### 10. Сгъни и сумирай
Въведете масив от 4*k цели числа, сгънете го както е показано по-долу и изведете сумата на горния и долния ред (2*k цели числа):
 
| Вход                      | Изход          | Коментари                                    |
| ------------------------- | -------------- | -------------------------------------------- |
| 5 2 3 6                   | 7 9            | 5 6  + 2 3  = 7 9                            |
| 1 2 3 4 5 6 7 8           | 5 5 13 13      | 2 1 8 7 + 3 4 5 6 = 5 5 13 13                |
| 4 3 -1 2 5 0 1 9 8 6 7 -2 | 1 8 4 -1 16 14 | -1 3 4 -2 7 6 + 2 5 0 1 9 8 = 1 8 4 -1 16 14 |

Използвайте LINQ израз:
- Ред 1, лява част: вземете първите k числа и обърнете наобратно.
- Ред 1, дясна част: обърнете наобратно и вземете първите k числа.
- Слейте лявата и дясната част на ред 1.
- Ред 2: пропуснете първите k числа и вземете следващите 2*k числа.
- Сумирайте масивите row1 и row2: var sum = row1.Select((x, index) => x + row2[index]).

### 11. Сортиране на часове
Напишете програма, която получава списък от часове (разделени с интервал, 24-часове формат) и ги сортира в нарастващ ред. Изведете сортираните часове разделени с интервали.
Примери: 06:55, 02:30, 23:11 -> 02:30, 06:55, 21:11

| Вход                                | Изход                                    |
| ----------------------------------- | ---------------------------------------- |
| 00:00 06:04 02:59 10:33 11:22 06:01 | 00:00, 02:59, 06:01, 06:04, 10:33, 11:22 |
| 04:25 04:21 04:19                   | 04:19, 04:21, 04:25                      |
| 00:00 23:59 12:00 16:00             | 00:00, 12:00, 16:00, 23:59               |

### 12. Нечетен филтър
Напишете програма, която получава масив от цели числа (раздели с интервал), премахва всички нечетни числа, след което превръща останалите числа в недчетни числа, според:
- Ако числото е по-голямо от средното от колекцията оставащи числа, добавяме 1 
- Ако числото е по-малко от средното от колекцията оставащи числа, то намаляме с 1.
След като превърнете всички елементи към нечетни числа, изведете масива.

| Вход                      | Изход      |
| ------------------------- | ---------- |
| 1 2 3 4 5 6 7 8 9 10      | 1 3 5 9 11 |
| 99 88 77 66 55 4 33 22 11 | 89 67 3 21 |
| 23 32 199 723 8127 95     | 31         |

### 13. Имунна система
Всеки организъм може да бъде нападнат от различни видове вируси. Информация за тях се съхраняват в имунната му система. Ако тя вече е среща вируса, ще го победи по-бързо, отколкото ако го среща за първи път.
Имунната система може да изчисли силата на вируса преди да го победи. Това е сумата от кодовете на всички букви в името на вируса, разделена на 3.
Имунната система може да изчисли времето, което трябва да се победи даден вирус в секунди. То е равно на силата на вируса умножено по дължината на името на вируса.
Когато изчислите времето за побеждаване на вируса, превърнете го в минути и секунди, като не използвате водещи нули.
- Ако имунната система победи вируса, изведете: "{virusName} defeated in {virusDefeatMinutes}m {virusDefeatSeconds}s."
- Ако силата на вируса е по-голяма от силата на имунната система, изведете "Immune System Defeated." И приключете изпълнението на програмата.
След като вируса е победен, имунната система си възвръща 20% от нейната сила. Ако 20-те процента надвишават първоначалната сила на имунната система, задайте състоянието ѝ до нейната първоначална сила.

Пример 1: вируст "flu1":
- сила: 102 (f) + 108 (l) + 117 (u) + 49 (1) = 376 / 3 = 125.33 = 125.
- Време за победа: 125 * 4 (дължина на името) = 500 секунди -> 8m 20s.

Пример 2: Срещна на "flu1" за втори път:
- Време за победа: (125 * 4) / 3 = 166.66 -> 166 секунди

Ако се срещне един и същ вирус последователно, НЕ намаляйте времето за неговата победа допълнително. Когато получите “end”, изведете статуса на имунната система във формата “Final Health: {finalHealth}”.

Вход
- На първи ред: началната сила на имунната система
- На всеки нов ред, до срещане на "end": имена на вируси

Изход при победен вирус изглежда така:
- Първи ред: "Virus {virusName}: {virusStrength} => {virusDefeatSeconds}"
- Втори ред: "{virusName} defeated in {defeatMins}m {defeatSecs}s."
- Трети ред: "Remaining health: {remainingHealth}". Оставащото здраве се извежда преди да се регенерира.

| Вход        | Изход                                  |
| ----------- | -------------------------------------- |
| 5000        | Virus flu1: 125 => 500 seconds         |
| flu1        | flu1 defeated in 8m 20s.               |
| test        | Remaining health: 4500                 |
| flu1        | Virus test: 149 => 596 seconds         |
| virusssssss | test defeated in 9m 56s.               |
| end         | Remaining health: 4404                 |
|             | Virus flu1: 125 => 166 seconds         |
|             | flu1 defeated in 2m 46s.               |
|             | Remaining health: 4834                 |
|             | Virus virusssssss: 419 => 4609 seconds |
|             | virusssssss defeated in 76m 49s.       |
|             | Remaining health: 391                  |
|             | Final Health: 469                      |

| Вход  | Изход                                  |
| ----- | -------------------------------------- |
| 1750  | Virus Ebola: 161 => 805 seconds        |
| Ebola | Ebola defeated in 13m 25s.             |
| ebola | Remaining health: 945                  |
| Ebola | Virus ebola: 171 => 855 seconds        |
| end   | ebola defeated in 14m 15s.             |
|       | Remaining health: 279                  |
|       | Virus Ebola: 161 => 268 seconds        |
|       | Ebola defeated in 4m 28s.              |
|       | Remaining health: 66                   |
|       | Final Health: 79                       |

| Вход       | Изход                                  |
| ---------- | -------------------------------------- |
| 5700       | Virus wannacry: 289 => 2312 seconds    |
| wannacry   | wannacry defeated in 38m 32s.          |
| iskaplache | Remaining health: 3388                 |
| wannacry   | Virus iskaplache: 348 => 3480 seconds  |
|            | iskaplache defeated in 58m 0s.         |
|            | Remaining health: 585                  |
|            | Virus wannacry: 289 => 770 seconds     |
|            | Immune System Defeated.                |

### 14. Поправка на email-и
Напишете програма, в която получавате последователност от низове, всеки на нов ред, докато срещнете команда “stop”. Първия низ е името на човека. На втори ред, ще получите имейл. Вашата задача е да съберете техните имена и имейли, след което трябва да премахнете имейлите, чиито домейни завършват с "us" или "uk" (без значение от големината на буквите). Извеждайте в следния формат:
{name} – > {email} 


| Вход                 | Изход                                |
| -------------------- | ------------------------------------ |
| Ivan                 | Ivan -> ivanivan@abv.bg              |
| ivanivan@abv.bg      | Petar Ivanov -> petartudjarov@abv.bg |
| Petar Ivanov         |                                      |
| petartudjarov@abv.bg |                                      |
| Mike Tyson           |                                      |
| myke@gmail.us        |                                      |
| stop                 |                                      |
